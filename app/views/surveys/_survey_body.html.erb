<div style="display: none;" data-bind="visible: true">
  <div id="survey-body">
    <ol data-bind="sortable: inputs" id="input-list">
      <li class="input" data-bind="css: { selected: PT.selectedInput() ? id === PT.selectedInput().id : false}, attr: {id: 'input' + id()}, valueUpdate: 'input'">
        <!-- ko if: inEdit -->
        <table>
          <tr>
            <th class="tall"><%= t(".question_label") %></th>
            <td><input type="text" class="form-control" data-bind="value: label, valueUpdate:'input'" placeholder="<%= t(".question_placeholder") %>" autofocus></td>
          </tr>
          <tr>
            <th><%= t(".answer_type") %></th>
            <td>
              <select class="form-control short inline" data-bind="options: PT.input_types, optionsValue: function(item) {return item.input_type}, optionsText: function(item) {return item.label}, value: input_type"></select>
              <div class="inline margin-left">
                <span data-bind="visible: input_type() == 'binary'">
                  <label><%= t(".annotation") %></label><input type="checkbox" data-bind="checked: annotate"></span>
                <span data-bind="visible: input_type() == 'int' || input_type() == 'decimal'">
                <label><%= t(".decimal") %></label><input type="checkbox" data-bind="checked: decimal, valueUpdate: input"></span>
              </div>
            </td>
          </tr>
          <tr>
            <th><span data-bind="visible: input_type() == 'select' || input_type() == 'select1'"><%= t(".options") %></span></th>
            <td>
              <div class="answer" data-bind="css: input_type">
                <div class="options" data-bind="visible: input_type() == 'select' || input_type() == 'select1'">
                  <ul class="answer" data-bind="sortable: options, valueUpdate:'input', css: input_type">
                    <li class="option edit">
                      <input data-bind="value: $parent.options()[$index()], valueUpdate:'input'" autofocus>
                      <span class="glyphicon glyphicon-remove-sign delete-option"data-bind="click: $parent.deleteOption, visible: $parent.options().length > 1"></span>
                      </li>
                  </ul>
                  <div class="phantom-option" data-bind="click: addOption, css: input_type">
                    <li>
                      <span class="dummy-input"><%= t(".add_new_option") %></span>
                    </li>  
                  </div>
                </div>
              </div>
              <div class="example">
                <p data-bind="visible: input_type() == 'date'"><%= t(".preview.date") %></p>
                <p data-bind="visible: input_type() == 'string'"><%= t(".preview.string") %></p>
                <p data-bind="visible: input_type() == 'int' && !decimal"><%= t(".preview.number") %></p>
                <p data-bind="visible: input_type() == 'int' && decimal"><%= t(".preview.decimal") %></p>
                <p data-bind="visible: input_type() == 'binary'">
                  <span class="glyphicon glyphicon-picture"></span>
                </p>
              </div>
            </td>
          </tr>
          <tr>
            <th></th>
            <td>
              <br>
              <label><%= t(".required") %></label><input type="checkbox" data-bind="checked: required">
              <br><br>
              <a href="#" class="btn btn-info save" data-bind="click: save"><%= t("defaults.save") %></a>
            </td>
          </tr>
        </table>

        <div class="modify">
          <a href="#" class="btn" data-bind="click: save"><span class="glyphicon glyphicon-floppy-disk"></span> </a>
          <a href="#" class="btn" data-bind="click: $parent.removeInput"><span class="glyphicon glyphicon-trash"></span></a>
        </div>
        <!-- /ko -->

        <!-- ko ifnot: inEdit -->
        <p data-bind="text: $data.label"></p>
        <div class="modify">
          <a href="#" class="btn" data-bind="click: edit"><%= t("defaults.edit") %></a>
          <a href="#" class="btn" data-bind="click: $parent.removeInput"><span class="glyphicon glyphicon-trash"></span></a>
        </div>

        <div class="options" data-bind="visible: input_type() === 'select' || input_type() === 'select1'">
          <ul class="answer" data-bind="foreach: options, valueUpdate:'input', css: input_type">
            <li class="option">
              <p class="inline" data-bind="text: $parent.options()[$index()], valueUpdate:'input'"></p>
            </li>
          </ul>
        </div>
        <div class="example" data-bind="visible: input_type() !== 'select' && input_type() !== 'select1'">
          <p data-bind="visible: input_type() == 'date'"><%= t(".preview.date") %></p>
          <p data-bind="visible: input_type() == 'string'"><%= t(".preview.string") %></p>
          <p data-bind="visible: input_type() == 'int' && !decimal"><%= t(".preview.number") %></p>
          <p data-bind="visible: input_type() == 'int' && decimal"><%= t(".preview.decimal") %></p>
          <p data-bind="visible: input_type() == 'binary'">
            <span class="glyphicon glyphicon-picture"></span>
          </p>
        </div>
        <!-- /ko -->
        <div class="error messages"></div>
      </li>
    </ol>
  </div>
</div>

<script type="text/javascript">
  PT.getSurvey("<%= survey_path(@survey) %>");
</script>